"use strict";
/* --------------------------------------------------------------------------------------------------------------------
 * WARNING: This file has been deprecated and should now be considered locked against further changes.  Its contents
 * have been partially or wholly superseded by functionality included in the @salesforce/core npm package, and exists
 * now to service prior uses in this repository only until they can be ported to use the new @salesforce/core library.
 *
 * If you need or want help deciding where to add new functionality or how to migrate to the new library, please
 * contact the CLI team at alm-cli@salesforce.com.
 * ----------------------------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", { value: true });
exports.importScratchOrgCred = async function (context) {
    // Here be üêâ
    /* _getConnection only sets up the listener for a token refresh but does
     * not actually check if the token is old. Need to do a subsequent call
     * with the connection object for it to check and do a refresh.
     */
    let conn = await context.org.force._getConnection(context.org, context.org.config);
    await conn.requestGet(conn._baseUrl());
    return conn;
};
exports.getActiveConnection = async function (context) {
    // if (TestUtil.isIntegrationTesting()) {
    //     let loginUrl = TestUtil.getTestInstance();
    //     let username = TestUtil.getTestUsername();
    //     let password = TestUtil.getTestPassword();
    //     let connection = new Connection();
    //     connection.loginUrl = loginUrl;
    //     await connection.loginBySoap(username, password);
    //     return connection;
    // } else {
    return await exports.importScratchOrgCred(context);
    // }
};

//# sourceMappingURL=force-cli-config.js.map
